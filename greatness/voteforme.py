# voteforme.py
import streamlit as st

st.set_page_config(page_title="President 101", page_icon="ğŸ—³ï¸", layout="centered")

# -----------------------------
# ì§ˆë¬¸ & ê²°ê³¼ ë°ì´í„°
# -----------------------------
QUESTIONS = [
    {
        "q": "ë‚´ ë°© ì›”ì„¸ ì§„ì§œ ë„ˆë¬´ ë¹„ì‹¸..\nì§‘ ë¬¸ì œ ì–´ë–»ê²Œ í•´ê²°í•´ì•¼ í•œë‹¤ê³  ìƒê°í•´?",
        "opts": [
            ("ë‚˜ë¼ê°€ ì„ëŒ€ì£¼íƒì„ ë§ì´ ì§€ì–´ì•¼ í•´. ì›”ì„¸ ê±±ì • ì—†ëŠ” ì‚¬íšŒ!", "ì´ì¬ëª…"),
            ("ì‚¬ëŒë“¤ì´ ì§‘ ì‚´ ìˆ˜ ìˆê²Œ ê·œì œë¥¼ í’€ì–´ì£¼ë©´ ìì—°ìŠ¤ëŸ½ê²Œ í•´ê²°ë¼", "ê¹€ë¬¸ìˆ˜"),
            ("ì²­ë…„ ê¸°ìˆ™ì‚¬ë‚˜ ì›”ì„¸ ì§€ì› ê°™ì€ ê²Œ í˜„ì‹¤ì ì´ì§€ ì•Šì„ê¹Œ?", "ì´ì¤€ì„"),
        ],
    },
    {
        "q": "ì˜ì‚¬ íŒŒì—… ë“± ì˜ë£Œ ë¬¸ì œ, ì–´ì°Œ í•´ê²°í• ê¹Œ?",
        "opts": [
            ("ê³µê³µì˜ë£Œ ëŠ˜ë¦¬ê³  ì¶©ë¶„íˆ ë…¼ì˜!", "ì´ì¬ëª…"),
            ("ë¹¨ë¦¬ ë³µê·€ì‹œì¼œì„œ ì •ìƒí™”ë¶€í„°!", "ê¹€ë¬¸ìˆ˜"),
            ("ë³´ê±´ë¶€ ë”°ë¡œ ë§Œë“¤ì–´ íš¨ìœ¨ì ìœ¼ë¡œ!", "ì´ì¤€ì„"),
        ],
    },
    {
        "q": "ì •ì¹˜ì¸ë“¤ ì‹¸ì›€ ë³´ë©´ ë‹µë‹µí•´â€¦ ì •ì¹˜ ì–´ë–»ê²Œ ë°”ë€Œë©´ ì¢‹ê² ì–´?",
        "opts": [
            ("ê²€Â·ì˜ ê¶Œë ¥ë„ íˆ¬ëª…í•˜ê²Œ ë°”ê¿”ì•¼!", "ì´ì¬ëª…"),
            ("ë‚˜ë¼ ì–´ì§€ëŸ½íˆëŠ” ì„¸ë ¥ë¶€í„° ì •ë¦¬!", "ê¹€ë¬¸ìˆ˜"),
            ("êµ­íšŒ êµ¬ì¡° ìì²´ë¥¼ ëœ¯ì–´ê³ ì¹˜ì!", "ì´ì¤€ì„"),
        ],
    },
    {
        "q": "ëª¨ë“  êµ­ë¯¼ì—ê²Œ ë§¤ë‹¬ ì¼ì • ê¸ˆì•¡ì„ ì£¼ëŠ” â€˜ê¸°ë³¸ì†Œë“â€™ì´ ìƒê¸´ë‹¤ë©´ ì–´ë•Œ?",
        "opts": [
            ("ë„ˆë¬´ ì¢‹ì§€! ê¸°íšŒê°€ ìƒê¸°ì–ì•„.", "ì´ì¬ëª…"),
            ("ë‚˜ë¼ê°€ ë‹¤ ì±™ê²¨ì£¼ëŠ” ê±´ ë¬´ë¦¬ì•¼.", "ê¹€ë¬¸ìˆ˜"),
            ("ì²­ë…„ ì°½ì—…Â·ëŒ€ì¶œ ì§€ì›ì´ ë” í˜„ì‹¤ì !", "ì´ì¤€ì„"),
        ],
    },
    {
        "q": "ì™¸êµÂ·ì•ˆë³´ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê±´?",
        "opts": [
            ("ëŒ€í™”ì™€ ê· í˜• ì™¸êµê°€ ì¢‹ì•„.", "ì´ì¬ëª…"),
            ("ê°•í•œ êµ°ëŒ€ê°€ ë‚˜ë¼ë¥¼ ì§€í‚¨ë‹¤!", "ê¹€ë¬¸ìˆ˜"),
            ("ìƒí™© ë”°ë¼ ì‹¤ìš©ì ìœ¼ë¡œ ê°€ì•¼ì§€.", "ì´ì¤€ì„"),
        ],
    },
    {
        "q": "ê²½ì œ ì‚´ë¦¬ë ¤ë©´ ë­ê°€ ìµœìš°ì„ ?",
        "opts": [
            ("ë³µì§€ë¥¼ ëŠ˜ë ¤ ê¸°íšŒë¥¼ ë³´ì¥!", "ì´ì¬ëª…"),
            ("ê¸°ì—…ì´ í™œë°œí•´ì•¼ ì¼ìë¦¬ë„!", "ê¹€ë¬¸ìˆ˜"),
            ("ì²­ë…„ ì°½ì—…ì´ ììœ ë¡œì›Œì•¼!", "ì´ì¤€ì„"),
        ],
    },
    {
        "q": "ê°™ì´ ì¼í•  ì •ì¹˜ì¸ì„ ë½‘ëŠ”ë‹¤ë©´?",
        "opts": [
            ("ì‚¬ëŒ ì‚¬ëŠ” ì„¸ìƒ ë§Œë“¤ ì‚¬ëŒ", "ì´ì¬ëª…"),
            ("ë‚˜ë¼ ê·¼ê°„ì„ ë°”ë¡œ ì„¸ìš¸ ì‚¬ëŒ", "ê¹€ë¬¸ìˆ˜"),
            ("ê³µì •ì„ ì¤‘ì‹œí•˜ëŠ” ì Šì€ ë¦¬ë”", "ì´ì¤€ì„"),
        ],
    },
]

RESULTS = {
    "ì´ì¬ëª…": {
        "title": "ë‹¹ì‹ ì€ â€˜ì´ì¬ëª…â€™ê³¼ ê°€ì¥ ë¹„ìŠ·í•´ìš”!",
        "desc": "- ë³µì§€ í™•ëŒ€\n- ê¸°ë³¸ì†Œë“\n- ê³µê³µì£¼íƒÂ·í‰í™” ì™¸êµ",
        "emoji": "ğŸŒ±",
    },
    "ê¹€ë¬¸ìˆ˜": {
        "title": "ë‹¹ì‹ ì€ â€˜ê¹€ë¬¸ìˆ˜â€™ì™€ ê°€ì¥ ë¹„ìŠ·í•´ìš”!",
        "desc": "- ììœ ì‹œì¥Â·ì‘ì€ ì •ë¶€\n- ê°•ê²½ ì•ˆë³´\n- ì „í†µì  ê°€ì¹˜",
        "emoji": "ğŸ›¡ï¸",
    },
    "ì´ì¤€ì„": {
        "title": "ë‹¹ì‹ ì€ â€˜ì´ì¤€ì„â€™ê³¼ ê°€ì¥ ë¹„ìŠ·í•´ìš”!",
        "desc": "- ì²­ë…„Â·ê¸°ìˆ  ì¤‘ì‹¬\n- ì‹¤ìš©ì£¼ì˜\n- êµ¬ì¡° ê°œí˜",
        "emoji": "ğŸš€",
    },
}

# -----------------------------
# ì„¸ì…˜ ì´ˆê¸°í™”
# -----------------------------
if "page" not in st.session_state:
    st.session_state.page = 0
    st.session_state.score = {"ì´ì¬ëª…": 0, "ê¹€ë¬¸ìˆ˜": 0, "ì´ì¤€ì„": 0}
    st.session_state.finished = False

# -----------------------------
# ì§ˆë¬¸ ì¶œë ¥ í•¨ìˆ˜
# -----------------------------
def show_question(idx):
    qdata = QUESTIONS[idx]
    st.markdown("## ğŸ—³ï¸ President 101")
    st.markdown("#### ë‹¹ì‹ ì˜ ëŒ€í†µë ¹ì—ê²Œ íˆ¬í‘œí•˜ì„¸ìš”!\n")
    st.markdown("---")
    st.markdown(f"### Q{idx + 1}. {qdata['q']}")

    col1, col2, col3 = st.columns(3)
    for i, (label, cand) in enumerate(qdata["opts"]):
        if [col1, col2, col3][i].button(label, key=f"q{idx}_opt{i}"):
            st.session_state.score[cand] += 1
            st.session_state.page += 1
            if st.session_state.page >= len(QUESTIONS):
                st.session_state.finished = True
            st.experimental_rerun()

# -----------------------------
# ê²°ê³¼ í˜ì´ì§€
# -----------------------------
def show_result():
    score = st.session_state.score
    winner = max(score, key=score.get)
    result = RESULTS[winner]

    st.markdown("## ğŸ‰ í…ŒìŠ¤íŠ¸ ê²°ê³¼")
    st.markdown(f"### {result['emoji']} {result['title']}")
    st.markdown(result["desc"])
    st.markdown("---")
    st.markdown("#### ğŸ§® ì„ íƒ ë¹„ìœ¨")
    for cand, s in score.items():
        st.markdown(f"- {cand}: {s}")

    if st.button("ğŸ”„ ë‹¤ì‹œ í•˜ê¸°"):
        for key in list(st.session_state.keys()):
            del st.session_state[key]
        st.experimental_rerun()

# -----------------------------
# ì‹¤í–‰
# -----------------------------
if not st.session_state.finished:
    show_question(st.session_state.page)
else:
    show_result()
